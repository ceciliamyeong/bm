<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>What is BM20?</title>

  <!-- ECharts (뉴스 섹션 바차트 등 확장 시 활용 가능) -->
  <script src="https://cdn.jsdelivr.net/npm/echarts@5"></script>

  <style>
    :root{--bg:#0b1020;--card:#11172a;--muted:#8aa0b5;--text:#e8f0ff;--up:#2E7D32;--down:#C62828;--brand:#1A237E;--accent:#4c74f2;}
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--text);font:15px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Apple Color Emoji,Segoe UI Emoji}
    a{color:#aecdff;text-decoration:none}
    a:hover{text-decoration:underline}
    header{position:sticky;top:0;background:linear-gradient(180deg,rgba(17,23,42,.95),rgba(17,23,42,.75));backdrop-filter:saturate(1.2) blur(8px);z-index:10;border-bottom:1px solid #233}
    .wrap{max-width:1100px;margin:0 auto;padding:16px}
    .brand{display:flex;gap:10px;align-items:center}
    .brand .dot{width:12px;height:12px;border-radius:50%;background:var(--accent);box-shadow:0 0 18px var(--accent)}
    nav{display:flex;gap:18px;align-items:center}

    .card{background:var(--card);border:1px solid #26354a;border-radius:14px;padding:16px;box-shadow:0 8px 28px rgba(0,0,0,.3)}
    .h{font-weight:700;letter-spacing:.2px}
    .mini{font-size:12px;color:var(--muted)}
    .section{margin-top:18px}

    /* 소개 히어로 */
    .hero{background:linear-gradient(180deg,#11183a 0%,#0f152b 100%);border:1px solid rgba(255,255,255,.06);border-radius:18px;padding:18px;box-shadow:0 12px 30px rgba(0,0,0,.35)}
    .hero h1{margin:0 0 8px 0;font-size:24px}
    .hero p{margin:0;color:#d9e3ff}

    /* 구성 표 */
    .tbl{width:100%;border-collapse:collapse}
    .tbl th,.tbl td{border-bottom:1px solid #223449;padding:10px 8px;text-align:left}
    .tbl th{color:#a8bdd6;font-weight:600;background:rgba(22,28,48,.6)}
    .tbl td.num{text-align:right}
    .chg.up{color:var(--up);font-weight:700}
    .chg.down{color:var(--down);font-weight:700}

    /* FAQ */
    .faq details{margin:8px 0;padding:10px 12px;border:1px solid #2b3d59;border-radius:12px;background:rgba(22,28,48,.6)}
    .faq summary{font-weight:700;cursor:pointer}

    /* 뉴스 카드 */
    .news-card{background:linear-gradient(180deg,#11183a 0%,#0f152b 100%);border:1px solid rgba(255,255,255,.06);border-radius:18px;padding:18px;box-shadow:0 12px 30px rgba(0,0,0,.35)}
    .news-card h3{margin:0 0 8px 0}
    .news-card p{margin:0;color:#d9e3ff}

    footer{color:#92a7be;margin:40px 0 60px}
  </style>
</head>
<body>

  <!-- 헤더/네비 (메인과 통일) -->
  <header>
    <div class="wrap" style="display:flex;gap:14px;align-items:center;justify-content:space-between">
      <div class="brand">
        <span class="dot"></span>
        <div>
          <div style="font-weight:800">BM20 Index</div>
          <div class="mini">Blockmedia Large-Cap Crypto 20</div>
        </div>
      </div>
      <nav>
        <a href="/bm/">Home</a>
        <a href="/bm/latest.html">Latest</a>
        <a href="/bm/indices/performance/">Charts</a>
        <a href="/bm/indices/">Data</a>
        <a href="/bm/what-is-bm20.html">About</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
   <section class="bm-hero" style="padding:48px 0 16px;background:linear-gradient(180deg,#0b1020 0%,#0b1020 60%,#0e1426 100%);color:#e8f0ff;font:16px/1.7 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Noto Sans',sans-serif">
  <div style="max-width:980px;margin:0 auto;padding:0 16px">
    <h1 style="margin:0 0 6px 0;font-size:34px;letter-spacing:.2px">What is BM20?</h1>
    <p style="margin:6px 0 0 0;color:#a7b4c8">한국 투자자 관점에서 시장의 <b>방향</b>과 <b>강도</b>를 한눈에 보여주는 대형 코인 20종 대표 지수</p>
    <div style="display:flex;gap:14px;flex-wrap:wrap;margin-top:18px">
      <span style="background:#18223b;border:1px solid #243255;padding:6px 10px;border-radius:999px">Base: <b>2025-01-01 = 100pt</b></span>
      <span style="background:#18223b;border:1px solid #243255;padding:6px 10px;border-radius:999px">Currency: <b>USD</b></span>
      <span style="background:#18223b;border:1px solid #243255;padding:6px 10px;border-radius:999px">Universe: <b>Top 20 by Market Cap</b></span>
      <span style="background:#18223b;border:1px solid #243255;padding:6px 10px;border-radius:999px">Rebalancing: <b>Monthly</b></span>
    </div>
  </div>
</section>

<section style="background:#0e1426;color:#e8f0ff">
  <div style="max-width:980px;margin:0 auto;padding:24px 16px">
    <h2 style="font-size:22px;margin:12px 0 8px">BM20 개요</h2>
    <p>BM20 Index는 글로벌 시가총액 상위 디지털 자산 20종을 하나의 바스켓으로 구성하여 한국 투자자에게 가장 중요한 시장의 “대표성”과 “체감 유동성”을 동시에 담아낸 지수입니다. CoinDesk 20의 표준형 프레임을 존중하되, 국내 3대 거래소(KRW 마켓) 상장 종목에 보정계수(예: ×1.3)를 적용하고 상한 규칙(예: BTC 30%, 기타 15%)으로 쏠림을 제어해 한국 시장 현실에 최적화했습니다. 지수는 ETF/ETP 전환까지 염두에 두고 설계되어 산출·유지·배포 전 과정의 투명성과 재현성을 중시합니다. :contentReference[oaicite:0]{index=0}</p>

    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px;margin:14px 0">
      <div style="background:#11172a;border:1px solid #1b2540;border-radius:14px;padding:14px">
        <b>설계 원칙</b>
        <ul style="margin:8px 0 0 18px;color:#a7b4c8">
          <li>대표성: 대형·고유동성 중심</li>
          <li>단순성: 시총가중을 기본, 최소 보정</li>
          <li>현지 적합성: KRW 마켓 상장 반영</li>
          <li>투명성: 산출 스크립트·변경로그 공개</li>
        </ul>
        <div style="margin-top:8px;color:#90a2bd">:contentReference[oaicite:1]{index=1}</div>
      </div>
      <div style="background:#11172a;border:1px solid #1b2540;border-radius:14px;padding:14px">
        <b>핵심 차별점</b>
        <ul style="margin:8px 0 0 18px;color:#a7b4c8">
          <li>국내 상장 보정(×1.3)으로 체감 유동성 반영</li>
          <li>상한 규칙으로 쏠림 방지(BTC 30%·기타 15%)</li>
          <li>정기 리밸런싱과 변경 공시</li>
        </ul>
        <div style="margin-top:8px;color:#90a2bd">:contentReference[oaicite:2]{index=2}</div>
      </div>
    </div>

    <h2 style="font-size:22px;margin:20px 0 8px">구성(유니버스) & 편입·제외 기준</h2>
    <p>1차 후보군은 전 세계 상장 디지털 자산 중 시가총액 상위 30~40개입니다. 이후 ①30일 평균 거래대금, ②상장 거래소 수, ③스프레드·체결 신뢰도 등 유동성 요건을 통과한 자산을 대상으로, 데이터 품질·국내 상장 여부까지 종합평가하여 최종 상위 20개를 편입합니다(동률 시 거래대금·상장 범위 우선). 스테이블코인·래핑/스테이킹·가스/유틸리티 전용·프라이버시·밈 토큰은 기본 지수에서 제외합니다. :contentReference[oaicite:3]{index=3}</p>

    <h2 style="font-size:22px;margin:20px 0 8px">가중치(Weights) & 상한(Cap)</h2>
    <ol style="margin:10px 0 0 18px;color:#a7b4c8">
      <li>기본 시총가중(유통량 기준 자유유통 시가총액)</li>
      <li>국내 상장 보정계수: 업비트·빗썸·코인원 상장 시 ×1.3 가중</li>
      <li>상한 규칙: BTC 최대 30%, 기타 종목 최대 15%</li>
      <li>정규화: 합계 100%로 재조정</li>
    </ol>
    <p style="color:#90a2bd;margin-top:6px">:contentReference[oaicite:4]{index=4}</p>

    <div style="background:#10182e;border:1px dashed #243255;border-radius:12px;padding:12px;margin-top:10px;color:#a7b4c8">
      <b>계산 예시(설명용)</b><br/>
      보정 후 BTC 비중이 45.5%라도 상한 30%로 컷하고 초과분은 잔여 종목으로 재분배합니다. ETH도 동일 원칙을 적용한 뒤 전체 합계를 100%로 정규화합니다. :contentReference[oaicite:5]{index=5}
    </div>

    <h2 style="font-size:22px;margin:20px 0 8px">산출 방식(Index Calculation)</h2>
    <ul style="margin:8px 0 0 18px;color:#a7b4c8">
      <li>지수 통화: USD</li>
      <li><b>기준일(Base): 2025-01-01 = 100.00pt</b></li>
      <li>라스파이레스형: <code style="background:#0c1224;border:1px solid #1b2540;border-radius:6px;padding:1px 6px">BM20ₜ = 100 × Σ[ Wᵢ × (Pᵢ,ₜ / Pᵢ,base) ]</code></li>
      <li>공식 공표: 일일 마감 값(대시보드는 근실시간 참고용)</li>
    </ul>
    <p style="color:#90a2bd;margin-top:6px">:contentReference[oaicite:6]{index=6}</p>

    <h2 style="font-size:22px;margin:20px 0 8px">리밸런싱·메인터넌스</h2>
    <p>BM20은 <b>월간 리밸런싱</b>을 기본으로 하며(버퍼 룰로 잦은 교체 최소화), 포크/에어드롭·상장폐지·거래중단 등 이벤트가 발생하면 위원회 심의를 거쳐 수시로 교체할 수 있습니다. 모든 변경은 사유와 함께 로그로 공개합니다. :contentReference[oaicite:7]{index=7}</p>

    <h2 style="font-size:22px;margin:20px 0 8px">거버넌스 & 통제</h2>
    <p><b>BM Index Committee</b>(내부 지수팀 + 외부 전문가)가 월간 리밸런싱 승인, 예외 편입·편출, 방법론 개정을 심의합니다. 운영은 IOSCO 금융벤치마크 원칙에 부합하도록 설계하며, 회의록 요약·편입/편출 사유·가중치 변경폭을 정기 공시하고 코드/데이터 스냅샷 기반의 감사 추적성을 유지합니다. :contentReference[oaicite:8]{index=8}</p>

    <h2 style="font-size:22px;margin:20px 0 8px">데이터 소스 & 품질 관리</h2>
    <p>가격·시총은 다중 거래소를 집계하고(이상치 제거·체결 신뢰도 필터), 유동성은 30일 거래대금과 상장 거래소 수를 봅니다. 국내 상장은 KRW 마켓 실거래 여부를 확인합니다. 결측·비정상 캔들은 자동 탐지 후 재수집/대체가격·재가중으로 처리합니다. :contentReference[oaicite:9]{index=9}</p>

    <h2 style="font-size:22px;margin:20px 0 8px">활용(뉴스·대시보드·투자상품)</h2>
    <ul style="margin:8px 0 0 18px;color:#a7b4c8">
      <li>콘텐츠: 1D/7D/30D/90D/YTD 수익률, 52주 고저, 섹터 비중, 종목별 기여도 등 지표를 일간 코멘터리에 활용</li>
      <li>오토메이션: “오늘 BM20 +2.3%, BTC·ETH가 상승 견인” 등 자동 문장 생성</li>
      <li>상품화: 산출/배포 SLA, 데이터 보존·감사, 라이선스 정책 정비로 ETF/ETP·파생상품 연계</li>
    </ul>
    <p style="color:#90a2bd;margin-top:6px">:contentReference[oaicite:10]{index=10}</p>

    <h2 style="font-size:22px;margin:20px 0 8px">FAQ</h2>
    <details style="background:#11172a;border:1px solid #1b2540;border-radius:12px;padding:14px;margin-bottom:10px">
      <summary style="cursor:pointer"><b>왜 ‘국내 상장 보정’을 쓰나요?</b></summary>
      <div style="margin-top:8px;color:#a7b4c8">KRW 마켓 상장 여부는 국내 투자자 입장에서 체감 유동성과 접근성에 직결됩니다. ×1.3 보정은 이 현실을 지수에 반영해 대표성을 높입니다. :contentReference[oaicite:11]{index=11}</div>
    </details>
    <details style="background:#11172a;border:1px solid #1b2540;border-radius:12px;padding:14px;margin-bottom:10px">
      <summary style="cursor:pointer"><b>시총가중인데 왜 상한(Cap)을 두나요?</b></summary>
      <div style="margin-top:8px;color:#a7b4c8">과도한 쏠림을 방지하고 다양한 섹터의 움직임을 균형 있게 반영하기 위해 BTC 30%, 기타 15% 상한을 적용합니다. 초과분은 잔여 종목으로 재분배합니다. :contentReference[oaicite:12]{index=12}</div>
    </details>
    <details style="background:#11172a;border:1px solid #1b2540;border-radius:12px;padding:14px;margin-bottom:10px">
      <summary style="cursor:pointer"><b>지수 값은 실시간인가요?</b></summary>
      <div style="margin-top:8px;color:#a7b4c8">대시보드에서는 근실시간 수치를 보더라도, 공식 공표치는 일일 마감 값입니다(뉴스·리포트용). :contentReference[oaicite:13]{index=13}</div>
    </details>

    <h2 style="font-size:22px;margin:20px 0 8px">변경 로그(예시 템플릿)</h2>
    <ul style="margin:8px 0 0 18px;color:#a7b4c8">
      <li><b>2025-01-01</b>: 기준일 100pt 설정, 베타 → 운영 전환</li>
      <li><b>2025-Q1~Q4</b>: 월간 리밸런싱·보정/상한 파라미터 검증, 변경 로그 공시</li>
    </ul>
  </div>
</section>

    <!-- 4) 뉴스 섹션 -->
    <section class="news-card section" id="newsBox" style="display:none">
      <h3 class="h" id="newsTitle">BM20 데일리 뉴스</h3>
      <p id="newsBody" class="mini">—</p>
    </section>

    <footer class="mini">
      © Blockmedia · 본 페이지는 실시간 Google Sheets CSV 및(선택) latest.json을 사용해 렌더링됩니다.
    </footer>
  </main>

  <script>
    // ===== 데이터 소스 (실시간 CSV)
    const v = Date.now();
    const COMPONENTS_CSV = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTndyrPd3WWwFtfzv2CZxJeDcH-l8ibQIdO5ouYS4HsaGpbeXQQbs6WEr9qPqqZbRoT6cObdFxJpief/pub?gid=1533548287&single=true&output=csv&v="+v;
    const LATEST_JSON     = "/bm/latest.json?v="+v;  // 있으면 뉴스/요약 보강

    async function fetchText(u){ const r=await fetch(u,{cache:'no-store'}); if(!r.ok) throw new Error("fetch fail"); return r.text(); }
    async function fetchJSON(u){ const r=await fetch(u,{cache:'no-store'}); if(!r.ok) throw new Error("fetch fail"); return r.json(); }
    function parseCSV(t){
      const rows=t.trim().split(/\r?\n/).map(l=>l.split(",").map(s=>s.trim()));
      const h=rows[0]; return rows.slice(1).map(r=>Object.fromEntries(h.map((k,i)=>[k.trim(), r[i]??""])));
    }
    function numStr(x){ const n=+String(x||"").replace(/[, ]/g,""); return isFinite(n)?n.toLocaleString():x; }

    (async ()=>{
      // (A) 구성 테이블
      try{
        const rows = parseCSV(await fetchText(COMPONENTS_CSV));
        const symK = Object.keys(rows[0]).find(k=>/symbol|심볼/i.test(k)) || "Symbol";
        const nameK= Object.keys(rows[0]).find(k=>/name|이름/i.test(k))   || "Name";
        const pxK  = Object.keys(rows[0]).find(k=>/price|가격/i.test(k))  || "Price";
        const mcK  = Object.keys(rows[0]).find(k=>/cap|총액/i.test(k))    || "Market Cap";
        const vK   = Object.keys(rows[0]).find(k=>/vol|거래/i.test(k))    || "24h Volume";
        const chK  = Object.keys(rows[0]).find(k=>/change_?24h|24h.*(chg|ret)|ret_?1d|1d/i.test(k)) || "change_24h";
        const tsK  = Object.keys(rows[0]).find(k=>/as.?of|date|time/i.test(k)); // 있으면 기준 시각 표시

        if (tsK && rows[0][tsK]) {
          document.getElementById("asof").textContent = "기준: " + rows[0][tsK];
        }

        const thead = `<tr>
          <th>Symbol</th><th>Name</th>
          <th class="num">Price</th>
          <th class="num">Market Cap</th>
          <th class="num">24h Vol</th>
          <th class="num">24h</th>
        </tr>`;

        const tbody = rows.map(o=>{
          const ch = parseFloat(String(o[chK]||"").replace(/[% ]/g,""));
          const chHtml = isFinite(ch)
            ? `<span class="chg ${ch>=0?'up':'down'}">${ch>=0?'+':''}${ch.toFixed(2)}%</span>`
            : '';
          return `<tr>
            <td>${o[symK]||""}</td>
            <td>${o[nameK]||""}</td>
            <td class="num">${numStr(o[pxK])}</td>
            <td class="num">${numStr(o[mcK])}</td>
            <td class="num">${numStr(o[vK])}</td>
            <td class="num">${chHtml}</td>
          </tr>`;
        }).join("");

        document.getElementById("tbl").innerHTML = thead + tbody;
      }catch(e){
        document.getElementById("tbl").innerHTML = `<tr><td class="mini">구성 데이터를 불러오지 못했습니다.</td></tr>`;
        console.warn(e);
      }

      // (B) 뉴스 섹션 (latest.json 또는 텍스트 파일 폴백)
      try{
        const d = await fetchJSON(LATEST_JSON);
        if (d?.news?.title || d?.news?.body) {
          document.getElementById("newsTitle").textContent = d.news.title || "BM20 데일리 뉴스";
          document.getElementById("newsBody").textContent  = d.news.body  || "";
          document.getElementById("newsBox").style.display = "";
        } else {
          // 텍스트 폴백
          const r = await fetch('/bm/bm20_news_latest.txt',{cache:'no-store'});
          if (r.ok) {
            document.getElementById("newsTitle").textContent = "BM20 데일리 뉴스";
            document.getElementById("newsBody").textContent  = await r.text();
            document.getElementById("newsBox").style.display = "";
          }
        }
      }catch(e){
        // 뉴스가 없어도 페이지는 정상 표시
      }
    })();
  </script>
</body>
</html>
