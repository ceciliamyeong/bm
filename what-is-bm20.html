<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>What is BM20?</title>

  <!-- ECharts (뉴스 섹션 바차트 등 확장 시 활용 가능) -->
  <script src="https://cdn.jsdelivr.net/npm/echarts@5"></script>

  <style>
    :root{--bg:#0b1020;--card:#11172a;--muted:#8aa0b5;--text:#e8f0ff;--up:#2E7D32;--down:#C62828;--brand:#1A237E;--accent:#4c74f2;}
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--text);font:15px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Apple Color Emoji,Segoe UI Emoji}
    a{color:#aecdff;text-decoration:none}
    a:hover{text-decoration:underline}
    header{position:sticky;top:0;background:linear-gradient(180deg,rgba(17,23,42,.95),rgba(17,23,42,.75));backdrop-filter:saturate(1.2) blur(8px);z-index:10;border-bottom:1px solid #233}
    .wrap{max-width:1100px;margin:0 auto;padding:16px}
    .brand{display:flex;gap:10px;align-items:center}
    .brand .dot{width:12px;height:12px;border-radius:50%;background:var(--accent);box-shadow:0 0 18px var(--accent)}
    nav{display:flex;gap:18px;align-items:center}

    .card{background:var(--card);border:1px solid #26354a;border-radius:14px;padding:16px;box-shadow:0 8px 28px rgba(0,0,0,.3)}
    .h{font-weight:700;letter-spacing:.2px}
    .mini{font-size:12px;color:var(--muted)}
    .section{margin-top:18px}

    /* 소개 히어로 */
    .hero{background:linear-gradient(180deg,#11183a 0%,#0f152b 100%);border:1px solid rgba(255,255,255,.06);border-radius:18px;padding:18px;box-shadow:0 12px 30px rgba(0,0,0,.35)}
    .hero h1{margin:0 0 8px 0;font-size:24px}
    .hero p{margin:0;color:#d9e3ff}

    /* 구성 표 */
    .tbl{width:100%;border-collapse:collapse}
    .tbl th,.tbl td{border-bottom:1px solid #223449;padding:10px 8px;text-align:left}
    .tbl th{color:#a8bdd6;font-weight:600;background:rgba(22,28,48,.6)}
    .tbl td.num{text-align:right}
    .chg.up{color:var(--up);font-weight:700}
    .chg.down{color:var(--down);font-weight:700}

    /* FAQ */
    .faq details{margin:8px 0;padding:10px 12px;border:1px solid #2b3d59;border-radius:12px;background:rgba(22,28,48,.6)}
    .faq summary{font-weight:700;cursor:pointer}

    /* 뉴스 카드 */
    .news-card{background:linear-gradient(180deg,#11183a 0%,#0f152b 100%);border:1px solid rgba(255,255,255,.06);border-radius:18px;padding:18px;box-shadow:0 12px 30px rgba(0,0,0,.35)}
    .news-card h3{margin:0 0 8px 0}
    .news-card p{margin:0;color:#d9e3ff}

    footer{color:#92a7be;margin:40px 0 60px}
  </style>
</head>
<body>

  <!-- 헤더/네비 (메인과 통일) -->
  <header>
    <div class="wrap" style="display:flex;gap:14px;align-items:center;justify-content:space-between">
      <div class="brand">
        <span class="dot"></span>
        <div>
          <div style="font-weight:800">BM20 Index</div>
          <div class="mini">Blockmedia Large-Cap Crypto 20</div>
        </div>
      </div>
      <nav>
        <a href="https://ceciliamyeong.github.io/bm/">Home</a>
        <a href="https://ceciliamyeong.github.io/bm/what-is-bm20.html">BM20?</a>
        <a href="https://ceciliamyeong.github.io/bm/performance.html">Charts</a>
        <a href="https://ceciliamyeong.github.io/bm/methodology.html">Data</a>
        <a href="https://ceciliamyeong.github.io/bm/latest.html">Latest</a>
      </nav>
    </div>
  </header>
    </div>
  </header>

  <main class="wrap">
    <!-- 1) 타이틀 + 개요 -->
    <section class="hero">
      <h1>What is BM20?</h1>
      <p>BM20 Index는 글로벌 시가총액 상위 디지털 자산 20종을 한 바스켓으로 묶어, 한국 투자자 관점에서 시장의 “방향”과 “강도”를 한눈에 보여주는 대표 지수입니다. 글로벌 표준형 지수의 장점을 따르되, 국내 3대 거래소(KRW 마켓) 상장 종목에 가중치 보정(예: ×1.3)을 적용해 ‘한국 투자자 체감 유동성’을 반영하는 것이 특징입니다. 지수는 ETF/ETP 등 투자상품화까지 염두에 두고 설계되어, 산출·유지·배포 전 과정의 투명성과 재현성을 중시합니다.</p>
      <p class="mini" style="margin-top:6px">가중치 상한: BTC 30%, ETH 20%, XRP/USDT/BNB 각 5%, 나머지 15종 균등(총 35%). 데이터 소스: Coingecko(기본), Yahoo Finance(폴백).</p>
    </section>

    <!-- 2) 구성 종목 (실시간 CSV) -->
    <section class="card section">
      <div class="h">구성 종목 (실시간)</div>
      <div class="mini" id="asof">—</div>
      <div style="overflow:auto;margin-top:10px">
        <table class="tbl" id="tbl"><tr><td class="mini">로딩 중…</td></tr></table>
      </div>
    </section>


<!-- 2.5) 방법론·운영 — (첫 번째·두 번째 이미지 내용 그대로, 얇은 톤) -->
    <section class="card section plain">
      <div class="h">설계 원칙</div>
      <ul>
        <li><b style="font-weight:520">대표성</b>: 대형·고유동성 자산 중심으로 구성</li>
        <li><b style="font-weight:520">단순성</b>: 해석 가능한 시가총액 가중을 기본으로, 최소한의 보정만 적용</li>
        <li><b style="font-weight:520">현지 적합성</b>: KRW 마켓 상장 여부를 보정 계수로 반영(×1.3 예시)</li>
        <li><b style="font-weight:520">투명성</b>: 산출 스크립트·버전·변경 로그 공개 및 재현성 확보</li>
      </ul>

      <h3>구성(유니버스)과 편입·제외 기준</h3>
      <p><b style="font-weight:520">기본 유니버스</b>: 전 세계 상장 디지털자산 중 시가총액 상위 30~40개를 1차 후보군으로 설정 후, 유동성(30일 평균 거래대금·상장 거래소 수·체결 신뢰도)과 데이터 품질을 필터링합니다. 최종적으로 상위 20개를 선정합니다(동률 시 거래대금·상장 범위 우선).</p>
      <p><b style="font-weight:520">제외 원칙(기본 지수)</b>: 스테이블코인, 래핑/스테이킹/페깅 토큰, 가스·유틸리티 전용 토큰, 프라이버시 코인, 밈 코인은 기본 지수에서 제외합니다(필요 시 별도 부지수로 추적).</p>

      <h3>가중치(Weights)와 상한(Cap)</h3>
      <ol style="margin:6px 0 6px 18px;color:var(--muted)">
        <li>기본 시총가중(유통량 기준 자유유통 시가총액)</li>
        <li>국내 상장 보정계수: 업비트·빗썸·코인원 상장 시 ×1.3 가중</li>
        <li>상한 적용: 비트코인 최대 30%, ETH 20%, 기타 단일 종목 최대 15%</li>
        <li>정규화: 합계 100%가 되도록 재조정</li>
      </ol>
      <p class="mini">참고 예시: BTC가 보정 후 비중 45.5%가 되어도 상한 30%로 컷, 초과분은 잔여 종목으로 재분배(ETH 등 타 종목에도 동일 적용).</p>

      <hr>

      <h3>산출 방식(Index Calculation)</h3>
      <ul style="margin:0 0 6px 18px;color:var(--muted)">
        <li>지수 통화: USD</li>
        <li>기준일(Base): <b style="font-weight:560;color:#dfe7ff">2025-01-01 = 100.00pt</b></li>
        <li>산출 논리: 기준일 대비 각 종목의 가격수익률에 <i>가중치 Wᵢ</i>를 곱해 합산하는 라스파이레스형</li>
        <li>간단식: <code>BM20ₜ = 100 × Σ[ Wᵢ × ( Pᵢ,ₜ / Pᵢ,base ) ]</code></li>
        <li>공식 지수 공표: 일일 마감 값 기준(뉴스/리포트에 사용)</li>
      </ul>

      <h3>리밸런싱·메인터넌스</h3>
      <ul>
        <li><b style="font-weight:520">정기 리밸런싱</b>: 원칙적으로 분기 1회(1·4·7·10월). 베타 운영 중 월간 리밸런싱을 실시한 바 있으며, 이벤트(상장폐지·거래중단·하드포크 등) 발생 시 예외 교체 가능. 모든 변경은 로그로 공개.</li>
        <li><b style="font-weight:520">이상치/데이터 이슈 대응</b>: 다중 소스 교차검증 → 자동·수동 검증 플로우 → 대체가격/재가중 로직.</li>
      </ul>

      <h3>거버넌스 & 통제</h3>
      <ul>
        <li><b style="font-weight:520">BM Index Committee</b>(내부 지수팀 + 외부 전문가) 운영: 월간/분기 심의, 예외 편입·편출, 방법론 개정 승인</li>
        <li><b style="font-weight:520">준거 원칙</b>: IOSCO 금융벤치마크 원칙 준수(프로세스·감사 추적성·버전 고정)</li>
        <li><b style="font-weight:520">투명성</b>: 회의록 요약·편입/편출 사유·가중치 변경폭을 정기 공시</li>
      </ul>
    </section>

    
    <!-- 3) FAQ -->
    <section class="card section">
      <div class="h">FAQ</div>
      <div class="faq">
        <details open><summary>BM20은 무엇인가?</summary><p class="mini">대형 20개 코인의 성과를 추적하는 블록미디어 고유 지수입니다. 일일 시황·차트·뉴스에 기준으로 사용합니다.</p></details>
        <details><summary>언제 출시됐나?</summary><p class="mini">지수 기준일은 2018-01-01이며, 2025년 정식 공개를 목표로 개편/자동화를 진행 중입니다.</p></details>
        <details><summary>왜 만들었나?</summary><p class="mini">복잡한 종목 개별 노이즈를 지수 하나로 요약해 일간/주간/월간 흐름을 명확히 보여주고, 장기적으로 ETF·파생 벤치마크로 확장하기 위함입니다.</p></details>
        <details><summary>어떤 점이 다른가?</summary><p class="mini">국내 상장 코인 1.3× 보정, 상한 규칙(BTC 30·ETH 20·XRP/USDT/BNB 5), 분기 리밸런싱을 명시적으로 공개합니다.</p></details>

        <details>
        <summary> BM20은 왜 ‘한국형 보정’을 쓰나?</summary>
        <p class="mini">KRW 마켓 상장 여부는 국내 투자자의 체감 유동성과 접근성에 직접 연결됩니다. ×1.3 보정은 이 현실을 지수에 반영해 국내 투자자 기준 대표성을 높입니다.</p>
      </details>
      <details>
        <summary>시총가중인데도 상한(Cap)은 왜 필요한가?</summary>
        <p class="mini">과도한 쏠림을 방지하고 다양한 섹터의 움직임을 균형 있게 반영하기 위해서입니다. BTC 30%, 기타 단일 종목 15% 등 상한을 적용하고 초과분은 다른 종목으로 재분배합니다.</p>
      </details>
      <details>
        <summary>지수 값은 실시간인가?</summary>
        <p class="mini">대시보드는 실시간/근실시간 조회가 가능하지만, 공식 공표 값은 일일 마감치로 확정됩니다.</p>
      </details>
      <details>
        <summary>편입·편출은 얼마나 자주 바뀌나?</summary>
        <p class="mini">정기 리밸런싱은 분기 1회(원칙). 상장폐지·거래중단·체결 신뢰도 저하 등 이벤트 발생 시 수시 교체가 가능하며, 모든 변경은 로그로 남깁니다.</p>
      </details>
      <details>
        <summary>데이터 신뢰성은 어떻게 보증하는가?</summary>
        <p class="mini">다중 소스 집계와 이상치 필터, 시간대 교차검증, 자동/수동 검증 플로우로 품질을 통제합니다. 코드·데이터는 버전 고정 및 감사 추적이 가능합니다.</p>
      </details>
    </div>
  </section>
   
    <!-- 4) 뉴스 섹션 -->
    <section class="news-card section" id="newsBox" style="display:none">
      <h3 class="h" id="newsTitle">BM20 데일리 뉴스</h3>
      <p id="newsBody" class="mini">—</p>
    </section>

       <!-- 5) 로드맵 -->
    <section class="card section">
      <div class="h">로드맵</div>
      <ul class="mini" style="margin:8px 0 0 18px">
        <li><b style="font-weight:520">2025 Q3</b> — 웹 페이지 정리(Overview/Components/Methodology/Performance), Google Sheet 연동, 일일 산출 자동화(워크플로우) 안정화</li>
        <li><b style="font-weight:520">2025 Q4</b> — BM20 v1.x 정식 공개: 방법론 문서·팩트시트·변경 로그 공개, Latest/차트 위젯 고도화</li>
        <li><b style="font-weight:520">2026 H1</b> — BM20 Historical Chart 공개, 종목별 기여도(Contribution) 분석, Notion/Slack/뉴스레터 자동 발행</li>
        <li><b style="font-weight:520">2026+</b> — API/임베드 위젯, ETF/ETP·파생상품 벤치마크 협의</li>
      </ul>
    </section>
   
    <footer class="mini">
      © Blockmedia · 본 페이지는 실시간 Google Sheets CSV 및(선택) latest.json을 사용해 렌더링됩니다.
    </footer>
  </main>

  <script>
    // ===== 데이터 소스 (실시간 CSV)
    const v = Date.now();
    const COMPONENTS_CSV = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTndyrPd3WWwFtfzv2CZxJeDcH-l8ibQIdO5ouYS4HsaGpbeXQQbs6WEr9qPqqZbRoT6cObdFxJpief/pub?gid=1533548287&single=true&output=csv&v="+v;
    const LATEST_JSON     = "/bm/latest.json?v="+v;  // 있으면 뉴스/요약 보강

    async function fetchText(u){ const r=await fetch(u,{cache:'no-store'}); if(!r.ok) throw new Error("fetch fail"); return r.text(); }
    async function fetchJSON(u){ const r=await fetch(u,{cache:'no-store'}); if(!r.ok) throw new Error("fetch fail"); return r.json(); }
    function parseCSV(t){
      const rows=t.trim().split(/\r?\n/).map(l=>l.split(",").map(s=>s.trim()));
      const h=rows[0]; return rows.slice(1).map(r=>Object.fromEntries(h.map((k,i)=>[k.trim(), r[i]??""])));
    }
    function numStr(x){ const n=+String(x||"").replace(/[, ]/g,""); return isFinite(n)?n.toLocaleString():x; }

    (async ()=>{
      // (A) 구성 테이블
      try{
        const rows = parseCSV(await fetchText(COMPONENTS_CSV));
        const symK = Object.keys(rows[0]).find(k=>/symbol|심볼/i.test(k)) || "Symbol";
        const nameK= Object.keys(rows[0]).find(k=>/name|이름/i.test(k))   || "Name";
        const pxK  = Object.keys(rows[0]).find(k=>/price|가격/i.test(k))  || "Price";
        const mcK  = Object.keys(rows[0]).find(k=>/cap|총액/i.test(k))    || "Market Cap";
        const vK   = Object.keys(rows[0]).find(k=>/vol|거래/i.test(k))    || "24h Volume";
        const chK  = Object.keys(rows[0]).find(k=>/change_?24h|24h.*(chg|ret)|ret_?1d|1d/i.test(k)) || "change_24h";
        const tsK  = Object.keys(rows[0]).find(k=>/as.?of|date|time/i.test(k)); // 있으면 기준 시각 표시

        if (tsK && rows[0][tsK]) {
          document.getElementById("asof").textContent = "기준: " + rows[0][tsK];
        }

        const thead = `<tr>
          <th>Symbol</th><th>Name</th>
          <th class="num">Price</th>
          <th class="num">Market Cap</th>
          <th class="num">24h Vol</th>
          <th class="num">24h</th>
        </tr>`;

        const tbody = rows.map(o=>{
          const ch = parseFloat(String(o[chK]||"").replace(/[% ]/g,""));
          const chHtml = isFinite(ch)
            ? `<span class="chg ${ch>=0?'up':'down'}">${ch>=0?'+':''}${ch.toFixed(2)}%</span>`
            : '';
          return `<tr>
            <td>${o[symK]||""}</td>
            <td>${o[nameK]||""}</td>
            <td class="num">${numStr(o[pxK])}</td>
            <td class="num">${numStr(o[mcK])}</td>
            <td class="num">${numStr(o[vK])}</td>
            <td class="num">${chHtml}</td>
          </tr>`;
        }).join("");

        document.getElementById("tbl").innerHTML = thead + tbody;
      }catch(e){
        document.getElementById("tbl").innerHTML = `<tr><td class="mini">구성 데이터를 불러오지 못했습니다.</td></tr>`;
        console.warn(e);
      }

      // (B) 뉴스 섹션 (latest.json 또는 텍스트 파일 폴백)
      try{
        const d = await fetchJSON(LATEST_JSON);
        if (d?.news?.title || d?.news?.body) {
          document.getElementById("newsTitle").textContent = d.news.title || "BM20 데일리 뉴스";
          document.getElementById("newsBody").textContent  = d.news.body  || "";
          document.getElementById("newsBox").style.display = "";
        } else {
          // 텍스트 폴백
          const r = await fetch('/bm/bm20_news_latest.txt',{cache:'no-store'});
          if (r.ok) {
            document.getElementById("newsTitle").textContent = "BM20 데일리 뉴스";
            document.getElementById("newsBody").textContent  = await r.text();
            document.getElementById("newsBox").style.display = "";
          }
        }
      }catch(e){
        // 뉴스가 없어도 페이지는 정상 표시
      }
    })();
  </script>
</body>
</html>
